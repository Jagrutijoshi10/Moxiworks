<div class="jumbotron">
    <header>
        <h1 class="center">
            <div class="topHeader">WELCOME TO MOXI-WORKS</div>
        </h1>
        <br /><br />
       
        <div>
            <form class="example-form">
                <mat-form-field class="example-full-width">
                    <input matInput placeholder="search" [(ngModel)]="searchText" name="searchText">
                    <span class="container" class="glyphicon glyphicon-search form-control-feedback"></span>
                </mat-form-field>
            </form>
        
            <br /><br />
            <div>
                <div class="center" *ngIf="((agents | filter: searchText).length )!= 0">
                    <span *ngFor="let index of pages">
                        <button class="btn btn-outline-dark btn-lg" (click)="getnextpages(index)"
                            [ngClass]="(currentPage=== index) ? 'active' : ''  ">
                            <div class="indexSize"> {{ index + 1 }}</div>
                        </button>
                    </span>
                </div>
            </div>
            <br /><br />
            <div class="placeright">
                <mat-form-field>
                    <mat-label>Select an option</mat-label>
                    <mat-select [(value)]="selected" (selectionChange)="onLimitChange()">
                        <mat-option value="10">10</mat-option>
                        <mat-option value="15">15</mat-option>
                        <mat-option value="20">20</mat-option>
                        <mat-option value="25">25</mat-option>
                    </mat-select>
                </mat-form-field>
            </div>
        </div>

    </header><br />

    <body>
        <ngx-spinner></ngx-spinner>
        <table mat-table [dataSource]="agents| filter:  searchText" class="mat-elevation-z8"
                                data-toggle="modal" data-target="#myModal">

            <!--- Note that these columns can be defined in any order.
                  The actual rendered columns are set as a property on the row definition" -->

            <!-- Position Column -->
            <ng-container matColumnDef="agent id">
                <th mat-header-cell *matHeaderCellDef><b> Agent ID</b> </th>
                <td mat-cell *matCellDef="let agent"  (click)="getAgentLog(agent)"> <b>{{ agent.moxi_works_agent_id }}</b></td>
            </ng-container>

            <!-- Name Column -->
            <ng-container matColumnDef="client office id">
                <th mat-header-cell *matHeaderCellDef><b> Client Office ID </b></th>
                <td mat-cell *matCellDef="let agent"  (click)="getAgentLog(agent)"> {{ agent.client_office_id}} </td>
            </ng-container>

            <!-- Weight Column -->
            <ng-container matColumnDef="name">
                <th mat-header-cell *matHeaderCellDef><b> Name </b></th>
                <td mat-cell *matCellDef="let agent"  (click)="getAgentLog(agent)"> {{ agent.name }} </td>
            </ng-container>

            <!-- Symbol Column -->
            <ng-container matColumnDef="email id">
                <th mat-header-cell *matHeaderCellDef><b> Email ID</b> </th>
                <td mat-cell *matCellDef="let agent"  (click)="getAgentLog(agent)"> {{ agent.primary_email_address}} </td>
            </ng-container>
            <!--  <tr *ngFor="let agent of agents  | filter:  searchText" ></tr> -->
            
            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>

        </table>
        
        <div>
            <span *ngIf="(agents | filter: searchText).length === 0">
                <p class="center">"No Exact matches"</p>
            </span>

        </div>
    </body><br/><br/>
    <footer class="center" *ngIf="((agents | filter: searchText).length )!= 0">
        <span *ngFor="let index of pages"> <button class="btn btn-outline-dark btn-lg" (click)="getnextpages(index)"
                [ngClass]="(currentPage=== index) ? 'active' : ''  ">
                <div class="indexSize"> {{ index + 1 }}</div>
            </button>
        </span>
    </footer>
</div>
<router-outlet></router-outlet>

<!-- The Modal -->

<div class="modal" id="myModal">
    <div class="container">
        <div class="modal-dialog">
            <div class="modal-dialog modal-xl">
                <div>
                    <div class="modal-content">
                        <!-- Modal Header -->
                        <div class="modal-header">
                            <h4 class="modal-title"><b>
                                    <div class="headerSize">{{ agentName }}</div>
                                </b></h4>
                            <button type="button" class="close" data-dismiss="modal">&times;</button>
                        </div>
                        <!-- Modal body -->
                        <div class="scrollbar">
                            <div class="modal-body" class="white-space-pre">
                                <div class="fontSize">{{details | json}}</div>
                            </div>
                        </div>
                        <!-- Modal footer -->
                        <div class="modal-footer">
                            <button type="button" class="btn btn-dark" data-dismiss="modal">
                                <div class="fontSize">Close</div>
                            </button>
                        </div>

                    </div>
                </div>
            </div>
        </div>
    </div>


</div>